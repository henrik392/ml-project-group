# Experiment 6: Training Hyperparameter Sweep
# Purpose: Find optimal training hyperparameters for F2 at 1280px resolution

experiment_id: exp06_hp_sweep
description: "Hyperparameter sweep (cls, box) at 1280px for F2 optimization"

# Model configuration
model: yolo11n
weights: null  # Train from pretrained COCO weights
skip_training: false  # Will be overridden by sweep logic

# Dataset
data: configs/dataset_fold_0.yaml
fold_id: 0

# Training parameters
epochs: 6  # Quick sweep to find optimal hyperparameters
imgsz: 1280  # High resolution (optimal from exp05)
batch: 8     # Doubled from exp05 (36GB RAM available, only uses ~9GB)
device: mps
seed: 42
name: yolo11n_hp_sweep_fold0
# NOTE: NOT specifying patience, augmentation, or most hyperparameters
# to use Ultralytics defaults (same as exp05 which got F2=0.303)

# Hyperparameter sweep configuration
# Only sweep the specific parameters we want to test
# All other hyperparameters will use Ultralytics defaults
hyperparameter_sweep:
  cls: [0.5, 1.0, 2.0, 3.0]  # Classification loss weight (default 0.5)
  box: [7.5, 5.0, 3.0]        # Bounding box loss weight (default 7.5)

# Inference configuration (use defaults for now)
inference:
  mode: standard
  conf: 0.25  # Will sweep conf/iou after finding best hyperparameters
  iou: 0.45

# Tracking
tracking:
  enabled: false

# Evaluation
eval_video_id: video_0

# Notes
notes: |
  HYPERPARAMETER SWEEP FOR F2 OPTIMIZATION

  Goal: Find optimal cls and box hyperparameters for single-class starfish detection.

  CRITICAL: Uses exact same settings as exp05 (which got F2=0.303)
  ─────────────────────────────────────────────────────────────────
  - NO explicit hyperparameters section (uses Ultralytics defaults)
  - NO augmentation override (uses auto_augment, erasing, etc.)
  - NO patience override (uses default 100 = essentially no early stopping)
  - Only modifies cls or box for each sweep run

  Strategy:
  ─────────
  1. Sweep cls: [0.5, 1.0, 2.0, 3.0] (4 runs)
     - cls=0.5 is baseline (should reproduce exp05 F2=0.303)
     - Higher cls = more focus on classification (detection) vs localization
     - Expected to improve recall → improve F2

  2. Sweep box: [7.5, 5.0, 3.0] (3 runs)
     - box=7.5 is baseline
     - Lower box = less emphasis on perfect box localization
     - May allow model to be more generous with detections

  Current Baseline (exp05, 6 epochs, Ultralytics defaults):
  ──────────────────────────────────────────────────────────
  F2: 0.303, Recall: 29.7%, Precision: 36.2%

  Time Estimate:
  ──────────────
  7 runs × 3.5 hrs/run = ~24 hours
